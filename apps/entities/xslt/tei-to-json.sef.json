{"N":"package","version":"20","packageVersion":"1","saxonVersion":"SaxonJS 2.6","target":"JS","targetVersion":"2","name":"TOP-LEVEL","relocatable":"false","buildDateTime":"2024-04-14T10:26:41.476Z","ns":"xml=~ =http://www.tei-c.org/ns/1.0 html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals","C":[{"N":"co","binds":"","id":"0","uniform":"true","C":[{"N":"template","flags":"os","module":"tei-to-json.xsl","slots":"200","baseUri":"file:///home/runner/work/alice-thornton/alice-thornton/apps/entities/tei-to-json.xsl","name":"Q{}insertBooksPagesForEvent","line":"129","expand-text":"false","sType":"* ","C":[{"N":"sequence","role":"body","sType":"* ","C":[{"N":"param","name":"Q{}entity","slot":"0","sType":"* ","as":"* ","flags":"","line":"130","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"0","sType":"* "}]},{"N":"forEach","sType":"* ","line":"135","C":[{"N":"docOrder","sType":"*NE nQ{http://www.tei-c.org/ns/1.0}ptr","role":"select","line":"135","C":[{"N":"docOrder","sType":"*NE nQ{http://www.tei-c.org/ns/1.0}ptr","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"treat","as":"N","diag":"1|0|XPTY0019|slash","C":[{"N":"varRef","name":"Q{}entity","slot":"0"}]},{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}linkGrp"}]},{"N":"filter","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}ptr"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"attVal","name":"Q{}type"},{"N":"str","val":"book"}]}]}]}]}]},{"N":"let","var":"Q{}ptr","slot":"1","sType":"* ","line":"136","C":[{"N":"dot","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}ptr","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"136"},{"N":"let","var":"Q{}document","slot":"2","sType":"* ","line":"137","C":[{"N":"docOrder","sType":"*NE nQ{lookup}doc","role":"select","line":"137","C":[{"N":"docOrder","sType":"*NE nQ{lookup}doc","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"fn","name":"document","C":[{"N":"str","val":""}]},{"N":"axis","name":"descendant","nodeTest":"*NE nQ{lookup}documents"}]},{"N":"filter","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{lookup}doc"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"attVal","name":"Q{}key"},{"N":"data","diag":"1|1||gc","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"treat","as":"N","diag":"1|0|XPTY0019|slash","C":[{"N":"varRef","name":"Q{}ptr","slot":"1"}]},{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}subtype"}]}]}]}]}]}]}]}]},{"N":"let","var":"Q{}documentPath","slot":"3","sType":"* ","line":"138","C":[{"N":"fn","name":"concat","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"138","C":[{"N":"str","val":"edition/texts/0"},{"N":"check","card":"?","diag":"0|1||concat","C":[{"N":"data","diag":"0|1||concat","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"treat","as":"N","diag":"1|0|XPTY0019|slash","C":[{"N":"varRef","name":"Q{}document","slot":"2"}]},{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}order"}]}]}]}]},{"N":"str","val":"_"},{"N":"check","card":"?","diag":"0|3||concat","C":[{"N":"data","diag":"0|3||concat","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"treat","as":"N","diag":"1|0|XPTY0019|slash","C":[{"N":"varRef","name":"Q{}document","slot":"2"}]},{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}filename"}]}]}]}]},{"N":"str","val":"/"},{"N":"check","card":"?","diag":"0|5||concat","C":[{"N":"data","diag":"0|5||concat","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"treat","as":"N","diag":"1|0|XPTY0019|slash","C":[{"N":"varRef","name":"Q{}document","slot":"2"}]},{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}filename"}]}]}]}]},{"N":"str","val":".xml"}]},{"N":"sequence","sType":"* ","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n            \n            \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"140","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"docOrder","sType":"*NA nQ{}filename","role":"select","line":"140","C":[{"N":"docOrder","sType":"*NA nQ{}filename","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"slash","op":"/","C":[{"N":"treat","as":"N","diag":"1|0|XPTY0019|slash","C":[{"N":"varRef","name":"Q{}document","slot":"2"}]},{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}filename"}]}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\": [\n            "}]},{"N":"forEach","sType":"* ","line":"141","C":[{"N":"fn","name":"tokenize","sType":"*AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"141","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||tokenize","C":[{"N":"check","card":"?","diag":"0|0||tokenize","C":[{"N":"data","diag":"0|0||tokenize","C":[{"N":"slash","op":"/","C":[{"N":"dot"},{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}target"}]}]}]}]}]},{"N":"sequence","sType":"* ","C":[{"N":"forEach","sType":"*NT ","line":"142","C":[{"N":"docOrder","sType":"*N","role":"select","line":"142","C":[{"N":"fn","name":"key","sType":"*N","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"str","val":"element_from_eventid"},{"N":"subscript","flags":"p","C":[{"N":"fn","name":"tokenize","C":[{"N":"dot"},{"N":"str","val":":"}]},{"N":"int","val":"2"}]},{"N":"check","card":"1","diag":"0|2||key","C":[{"N":"fn","name":"document","C":[{"N":"varRef","name":"Q{}documentPath","slot":"3"}]}]}]}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"143","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"fn","sType":"1AO","name":"number","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"143","C":[{"N":"check","card":"?","diag":"0|0||number","C":[{"N":"data","diag":"0|0||number","C":[{"N":"slash","op":"/","C":[{"N":"fn","name":"reverse","C":[{"N":"first","C":[{"N":"axis","name":"preceding","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}pb"}]}]},{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}n"}]}]}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]}]},{"N":"choose","sType":"? ","line":"145","C":[{"N":"vc","op":"ne","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","sType":"1AB","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","line":"145","C":[{"N":"fn","name":"position"},{"N":"fn","name":"last"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":","}]},{"N":"true"},{"N":"empty","sType":"0 "}]}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n            ]\n            "}]},{"N":"choose","sType":"? ","line":"148","C":[{"N":"vc","op":"ne","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","sType":"1AB","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","line":"148","C":[{"N":"fn","name":"position"},{"N":"fn","name":"last"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":","}]},{"N":"true"},{"N":"empty","sType":"0 "}]}]}]}]}]}]}]}]}]},{"N":"co","id":"1","uniform":"true","binds":"2","C":[{"N":"template","flags":"os","module":"tei-to-json.xsl","slots":"200","baseUri":"file:///home/runner/work/alice-thornton/alice-thornton/apps/entities/tei-to-json.xsl","name":"Q{}insertBooksPages","line":"152","expand-text":"false","sType":"* ","C":[{"N":"sequence","role":"body","sType":"* ","C":[{"N":"param","name":"Q{}entityPrefix","slot":"0","sType":"* ","as":"* ","flags":"","line":"153","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"0","sType":"* "}]},{"N":"param","name":"Q{}entity","slot":"1","sType":"* ","as":"* ","flags":"","line":"154","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"1","sType":"* "}]},{"N":"forEach","sType":"* ","line":"155","C":[{"N":"fn","name":"tokenize","sType":"*AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"155","C":[{"N":"str","val":"book_of_remembrances,book_one,book_two,book_three"},{"N":"str","val":","}]},{"N":"let","var":"Q{}documentPath","slot":"2","sType":"* ","line":"157","C":[{"N":"fn","name":"concat","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"157","C":[{"N":"str","val":"edition/texts/0"},{"N":"arith","op":"-","calc":"i-i","C":[{"N":"fn","name":"position"},{"N":"int","val":"1"}]},{"N":"str","val":"_"},{"N":"dot"},{"N":"str","val":"/"},{"N":"dot"},{"N":"str","val":".xml"}]},{"N":"sequence","sType":"* ","C":[{"N":"callT","bSlot":"0","sType":"* ","name":"Q{}insertBookPages","line":"159","C":[{"N":"withParam","name":"Q{}entityPrefix","slot":"0","sType":"*","C":[{"N":"varRef","name":"Q{}entityPrefix","slot":"0","sType":"*","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"160"}]},{"N":"withParam","name":"Q{}document","slot":"0","sType":"*N","C":[{"N":"docOrder","sType":"*N","role":"select","line":"161","C":[{"N":"fn","name":"document","sType":"*N","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"varRef","name":"Q{}documentPath","slot":"2"}]}]}]},{"N":"withParam","name":"Q{}bookName","slot":"0","sType":"1AS","C":[{"N":"dot","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"162"}]},{"N":"withParam","name":"Q{}entity","slot":"1","sType":"*","C":[{"N":"varRef","name":"Q{}entity","slot":"1","sType":"*","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"163"}]}]},{"N":"choose","sType":"? ","line":"165","C":[{"N":"vc","op":"ne","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","sType":"1AB","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","line":"165","C":[{"N":"fn","name":"position"},{"N":"fn","name":"last"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":","}]},{"N":"true"},{"N":"empty","sType":"0 "}]}]}]}]}]}]}]},{"N":"co","binds":"","id":"2","uniform":"true","C":[{"N":"template","flags":"os","module":"tei-to-json.xsl","slots":"200","baseUri":"file:///home/runner/work/alice-thornton/alice-thornton/apps/entities/tei-to-json.xsl","name":"Q{}insertBookPages","line":"171","expand-text":"false","sType":"* ","C":[{"N":"sequence","role":"body","sType":"* ","C":[{"N":"param","name":"Q{}document","slot":"0","sType":"* ","as":"* ","flags":"","line":"172","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"0","sType":"* "}]},{"N":"param","name":"Q{}bookName","slot":"1","sType":"* ","as":"* ","flags":"","line":"173","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"1","sType":"* "}]},{"N":"param","name":"Q{}entityPrefix","slot":"2","sType":"* ","as":"* ","flags":"","line":"174","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"2","sType":"* "}]},{"N":"param","name":"Q{}entity","slot":"3","sType":"* ","as":"* ","flags":"","line":"175","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"3","sType":"* "}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n        \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"176","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"varRef","sType":"*","name":"Q{}bookName","slot":"1","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"176"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\": [\n            "}]},{"N":"forEach","sType":"* ","line":"177","C":[{"N":"docOrder","sType":"*N","role":"select","line":"177","C":[{"N":"fn","name":"key","sType":"*N","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"str","val":"element_from_ref"},{"N":"fn","name":"concat","C":[{"N":"check","card":"?","diag":"0|0||concat","C":[{"N":"data","diag":"0|0||concat","C":[{"N":"varRef","name":"Q{}entityPrefix","slot":"2"}]}]},{"N":"check","card":"?","diag":"0|1||concat","C":[{"N":"data","diag":"0|1||concat","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"treat","as":"N","diag":"1|0|XPTY0019|slash","C":[{"N":"varRef","name":"Q{}entity","slot":"3"}]},{"N":"axis","name":"attribute","nodeTest":"*NA nQ{http://www.w3.org/XML/1998/namespace}id"}]}]}]}]}]},{"N":"treat","as":"N","diag":"0|2||key","C":[{"N":"check","card":"1","diag":"0|2||key","C":[{"N":"varRef","name":"Q{}document","slot":"0"}]}]}]}]},{"N":"sequence","sType":"* ","C":[{"N":"valueOf","flags":"l","sType":"1NT ","line":"178","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"fn","sType":"1AO","name":"number","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"178","C":[{"N":"check","card":"?","diag":"0|0||number","C":[{"N":"data","diag":"0|0||number","C":[{"N":"slash","op":"/","C":[{"N":"fn","name":"reverse","C":[{"N":"first","C":[{"N":"axis","name":"preceding","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}pb"}]}]},{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}n"}]}]}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"choose","sType":"? ","line":"179","C":[{"N":"vc","op":"ne","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","sType":"1AB","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","line":"179","C":[{"N":"fn","name":"position"},{"N":"fn","name":"last"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":","}]},{"N":"true"},{"N":"empty","sType":"0 "}]}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n        ]\n    "}]}]}]}]},{"N":"co","binds":"","id":"3","vis":"PRIVATE","ex:uniform":"true","C":[{"N":"function","name":"Q{internals}capitaliseFirstLetter","as":"1AS ","slots":"201","ns":"xml=~ =http://www.tei-c.org/ns/1.0 html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals","module":"tei-to-json.xsl","baseUri":"file:///home/runner/work/alice-thornton/alice-thornton/apps/entities/tei-to-json.xsl","flags":"muu","sig":"1F r[1AS ] a[1AS ] ","sType":"1F r[1AS ] a[1AS ] ","line":"121","C":[{"N":"arg","slot":"0","name":"Q{}input","as":"AS ","sType":"AS "},{"N":"fn","name":"concat","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"body","line":"126","C":[{"N":"fn","name":"upper-case","C":[{"N":"fn","name":"substring","C":[{"N":"treat","as":"AS","diag":"0|0||substring","C":[{"N":"check","card":"?","diag":"0|0||substring","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||substring","C":[{"N":"check","card":"?","diag":"0|0||substring","C":[{"N":"data","diag":"0|0||substring","C":[{"N":"varRef","name":"Q{}input","slot":"0"}]}]}]}]}]},{"N":"convert","to":"AO","flags":"","C":[{"N":"int","val":"1"}]},{"N":"convert","to":"AO","flags":"","C":[{"N":"int","val":"1"}]}]}]},{"N":"fn","name":"substring","C":[{"N":"treat","as":"AS","diag":"0|0||substring","C":[{"N":"check","card":"?","diag":"0|0||substring","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||substring","C":[{"N":"check","card":"?","diag":"0|0||substring","C":[{"N":"data","diag":"0|0||substring","C":[{"N":"varRef","name":"Q{}input","slot":"0"}]}]}]}]}]},{"N":"convert","to":"AO","flags":"","C":[{"N":"int","val":"2"}]}]},{"N":"filter","C":[{"N":"str","val":" "},{"N":"fn","name":"not","C":[{"N":"fn","name":"last"}]}]}]}]}]},{"N":"co","id":"4","binds":"3 0 1 4","C":[{"N":"mode","onNo":"TC","flags":"","patternSlots":"0","prec":"","C":[{"N":"templateRule","rank":"0","prec":"0","seq":"7","ns":"xml=~ =http://www.tei-c.org/ns/1.0 html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals","minImp":"0","flags":"s","slots":"200","baseUri":"file:///home/runner/work/alice-thornton/alice-thornton/apps/entities/tei-to-json.xsl","line":"105","module":"tei-to-json.xsl","expand-text":"false","match":"tei:event","prio":"0","matches":"NE nQ{http://www.tei-c.org/ns/1.0}event","C":[{"N":"p.nodeTest","role":"match","test":"NE nQ{http://www.tei-c.org/ns/1.0}event","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}event","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals "},{"N":"let","var":"Q{}desc","slot":"0","sType":"* ","line":"106","role":"action","C":[{"N":"fn","name":"normalize-space","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"106","C":[{"N":"fn","name":"replace","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||replace","C":[{"N":"check","card":"?","diag":"0|0||replace","C":[{"N":"data","diag":"0|0||replace","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}desc"},{"N":"axis","name":"child","nodeTest":"*NT"}]}]}]}]},{"N":"str","val":"\""},{"N":"str","val":"\\\\\""}]}]},{"N":"let","var":"Q{}category","slot":"1","sType":"* ","line":"107","C":[{"N":"ufCall","name":"Q{internals}capitaliseFirstLetter","coId":"3","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"107","bSlot":"0","C":[{"N":"fn","name":"normalize-space","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||normalize-space","C":[{"N":"check","card":"?","diag":"0|0||normalize-space","C":[{"N":"data","diag":"0|0||normalize-space","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}label"},{"N":"axis","name":"child","nodeTest":"*NT"}]}]}]}]}]}]},{"N":"let","var":"Q{}title","slot":"2","sType":"* ","line":"108","C":[{"N":"fn","name":"concat","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"108","C":[{"N":"check","card":"?","diag":"0|0||concat","C":[{"N":"data","diag":"0|0||concat","C":[{"N":"varRef","name":"Q{}category","slot":"1"}]}]},{"N":"str","val":": "},{"N":"check","card":"?","diag":"0|2||concat","C":[{"N":"data","diag":"0|2||concat","C":[{"N":"varRef","name":"Q{}desc","slot":"0"}]}]}]},{"N":"sequence","sType":"* ","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n        {\n            \"type\": \"event\",\n            \"id\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"111","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"axis","sType":"*NA nQ{http://www.w3.org/XML/1998/namespace}id","name":"attribute","nodeTest":"*NA nQ{http://www.w3.org/XML/1998/namespace}id","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"111"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"sortkey\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"112","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"varRef","sType":"*","name":"Q{}title","slot":"2","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"112"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"search\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"113","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"varRef","sType":"*","name":"Q{}category","slot":"1","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"113"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":" "}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"113","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"varRef","sType":"*","name":"Q{}desc","slot":"0","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"113"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":" _event_"}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"113","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"axis","sType":"*NA nQ{http://www.w3.org/XML/1998/namespace}id","name":"attribute","nodeTest":"*NA nQ{http://www.w3.org/XML/1998/namespace}id","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"113"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"title\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"114","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"varRef","sType":"*","name":"Q{}title","slot":"2","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"114"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"cat\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"115","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"varRef","sType":"*","name":"Q{}category","slot":"1","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"115"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"pages\": {"}]},{"N":"callT","bSlot":"1","sType":"* ","name":"Q{}insertBooksPagesForEvent","line":"116","C":[{"N":"withParam","name":"Q{}entity","slot":"0","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}event","C":[{"N":"dot","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}event","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"13"}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"}\n        }\n        "}]},{"N":"choose","sType":"? ","line":"118","C":[{"N":"vc","op":"ne","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","sType":"1AB","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","line":"118","C":[{"N":"fn","name":"position"},{"N":"fn","name":"last"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":","}]},{"N":"true"},{"N":"empty","sType":"0 "}]}]}]}]}]}]},{"N":"templateRule","rank":"1","prec":"0","seq":"6","ns":"xml=~ =http://www.tei-c.org/ns/1.0 html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals","minImp":"0","flags":"s","slots":"200","baseUri":"file:///home/runner/work/alice-thornton/alice-thornton/apps/entities/tei-to-json.xsl","line":"74","module":"tei-to-json.xsl","expand-text":"false","match":"tei:place","prio":"0","matches":"NE nQ{http://www.tei-c.org/ns/1.0}place","C":[{"N":"p.nodeTest","role":"match","test":"NE nQ{http://www.tei-c.org/ns/1.0}place","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}place","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals "},{"N":"sequence","role":"action","sType":"* ","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n        {\n            \"type\": \"place\",\n            \"id\": \"place:"}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"77","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"axis","sType":"*NA nQ{http://www.w3.org/XML/1998/namespace}id","name":"attribute","nodeTest":"*NA nQ{http://www.w3.org/XML/1998/namespace}id","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"77"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"sortkey\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"78","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"first","sType":"?","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"78","C":[{"N":"sequence","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}location"},{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}country"}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]},{"N":"str","val":"(NOCOUNTRY)"}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"-"}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"78","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"first","sType":"?","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"78","C":[{"N":"sequence","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}location"},{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}region"}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]},{"N":"str","val":"(NOREGION)"}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"-"}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"78","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"first","sType":"?","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"78","C":[{"N":"sequence","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}location"},{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}settlement"}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]},{"N":"str","val":"(NOSETTLEMENT)"}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"-"}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"78","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"first","sType":"?","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"78","C":[{"N":"sequence","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}location"},{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}placeName"}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]},{"N":"str","val":"(NOPLACENAME)"}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"-"}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"78","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"first","sType":"?NT","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"78","C":[{"N":"sequence","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}location"},{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}settlement"}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]},{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}location"},{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}geogName"}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]},{"N":"slash","op":"/","C":[{"N":"filter","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}placeName"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"attVal","name":"Q{}type"},{"N":"str","val":"label"}]}]},{"N":"axis","name":"child","nodeTest":"*NT"}]},{"N":"slash","op":"/","C":[{"N":"filter","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}geogName"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"attVal","name":"Q{}type"},{"N":"str","val":"label"}]}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"search\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"79","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"docOrder","sType":"*NT","role":"select","line":"79","C":[{"N":"slash","op":"/","sType":"*NT","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"filter","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}*"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"attVal","name":"Q{}type"},{"N":"str","val":"label"}]}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":" _place_"}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"79","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"axis","sType":"*NA nQ{http://www.w3.org/XML/1998/namespace}id","name":"attribute","nodeTest":"*NA nQ{http://www.w3.org/XML/1998/namespace}id","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"79"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"title\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"80","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"docOrder","sType":"*NT","role":"select","line":"80","C":[{"N":"slash","op":"/","sType":"*NT","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"filter","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}*"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"attVal","name":"Q{}type"},{"N":"str","val":"label"}]}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"subtype\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"81","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"axis","sType":"*NA nQ{}type","name":"attribute","nodeTest":"*NA nQ{}type","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"81"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"region\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"82","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"first","sType":"?","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"82","C":[{"N":"sequence","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}location"},{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}region"}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]},{"N":"str","val":"Europe"}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"settlement\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"83","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"docOrder","sType":"*NT","role":"select","line":"83","C":[{"N":"docOrder","sType":"*NT","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}location"},{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}settlement"}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"pages\": {"}]},{"N":"callT","bSlot":"2","sType":"* ","name":"Q{}insertBooksPages","line":"84","C":[{"N":"withParam","name":"Q{}entity","slot":"0","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}place","C":[{"N":"dot","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}place","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"15"}]},{"N":"withParam","name":"Q{}entityPrefix","slot":"0","sType":"1AS","C":[{"N":"str","val":"place:","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"16"}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"}\n        }\n        "}]},{"N":"choose","sType":"? ","line":"86","C":[{"N":"vc","op":"ne","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","sType":"1AB","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","line":"86","C":[{"N":"fn","name":"position"},{"N":"fn","name":"last"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":","}]},{"N":"true"},{"N":"empty","sType":"0 "}]}]}]},{"N":"templateRule","rank":"2","prec":"0","seq":"5","ns":"xml=~ =http://www.tei-c.org/ns/1.0 html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals","minImp":"0","flags":"s","slots":"200","baseUri":"file:///home/runner/work/alice-thornton/alice-thornton/apps/entities/tei-to-json.xsl","line":"61","module":"tei-to-json.xsl","expand-text":"false","match":"tei:person","prio":"0","matches":"NE nQ{http://www.tei-c.org/ns/1.0}person","C":[{"N":"p.nodeTest","role":"match","test":"NE nQ{http://www.tei-c.org/ns/1.0}person","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}person","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals "},{"N":"sequence","role":"action","sType":"* ","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n        {\n            \"type\": \"person\",\n            \"id\": \"ppl:"}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"64","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"axis","sType":"*NA nQ{http://www.w3.org/XML/1998/namespace}id","name":"attribute","nodeTest":"*NA nQ{http://www.w3.org/XML/1998/namespace}id","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"64"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            "}]},{"N":"choose","sType":"* ","line":"65","C":[{"N":"docOrder","sType":"*NE nQ{http://www.tei-c.org/ns/1.0}surname","line":"65","C":[{"N":"slash","op":"/","sType":"*NE nQ{http://www.tei-c.org/ns/1.0}surname","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}persName"},{"N":"first","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}surname"}]}]}]},{"N":"sequence","sType":"*NT ","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\"sortkey\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"fn","name":"normalize-space","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"4","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||normalize-space","C":[{"N":"check","card":"?","diag":"0|0||normalize-space","C":[{"N":"data","diag":"0|0||normalize-space","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}persName"},{"N":"first","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}surname"}]}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]}]}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"-"}]},{"N":"valueOf","flags":"l","sType":"1NT ","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"fn","name":"normalize-space","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"5","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||normalize-space","C":[{"N":"check","card":"?","diag":"0|0||normalize-space","C":[{"N":"data","diag":"0|0||normalize-space","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}persName"},{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}forename"}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]}]}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"-"}]},{"N":"valueOf","flags":"l","sType":"1NT ","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"fn","name":"normalize-space","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"6","C":[{"N":"fn","name":"replace","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||replace","C":[{"N":"check","card":"?","diag":"0|0||replace","C":[{"N":"data","diag":"0|0||replace","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}birth"},{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}when-custom"}]}]}]}]},{"N":"str","val":"\\D"},{"N":"str","val":""}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"search\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"66","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"fn","name":"normalize-space","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"66","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||normalize-space","C":[{"N":"check","card":"?","diag":"0|0||normalize-space","C":[{"N":"data","diag":"0|0||normalize-space","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}persName"},{"N":"first","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}surname"}]}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]}]}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":" "}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"66","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"fn","name":"normalize-space","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"66","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||normalize-space","C":[{"N":"check","card":"?","diag":"0|0||normalize-space","C":[{"N":"data","diag":"0|0||normalize-space","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}persName"},{"N":"subscript","flags":"p","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}surname"},{"N":"int","val":"2"}]}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]}]}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":" "}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"66","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"fn","name":"normalize-space","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"66","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||normalize-space","C":[{"N":"check","card":"?","diag":"0|0||normalize-space","C":[{"N":"data","diag":"0|0||normalize-space","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}persName"},{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}forename"}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]}]}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":" _ppl_"}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"66","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"axis","sType":"*NA nQ{http://www.w3.org/XML/1998/namespace}id","name":"attribute","nodeTest":"*NA nQ{http://www.w3.org/XML/1998/namespace}id","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"66"}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\","}]}]},{"N":"true"},{"N":"empty","sType":"0 "}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n            \"title\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"67","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"fn","name":"normalize-space","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"67","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||normalize-space","C":[{"N":"check","card":"?","diag":"0|0||normalize-space","C":[{"N":"data","diag":"0|0||normalize-space","C":[{"N":"slash","op":"/","C":[{"N":"filter","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}persName"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"attVal","name":"Q{}type"},{"N":"str","val":"label"}]}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"bio\": \""}]},{"N":"valueOf","flags":"l","sType":"1NT ","line":"68","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"fn","name":"normalize-space","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"68","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||normalize-space","C":[{"N":"check","card":"?","diag":"0|0||normalize-space","C":[{"N":"data","diag":"0|0||normalize-space","C":[{"N":"docOrder","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}noteGrp"},{"N":"filter","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}note"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"attVal","name":"Q{}type"},{"N":"str","val":"bio"}]}]}]},{"N":"axis","name":"child","nodeTest":"*NT"}]}]}]}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\",\n            \"pages\": {"}]},{"N":"callT","bSlot":"2","sType":"* ","name":"Q{}insertBooksPages","line":"69","C":[{"N":"withParam","name":"Q{}entity","slot":"0","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}person","C":[{"N":"dot","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}person","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"14"}]},{"N":"withParam","name":"Q{}entityPrefix","slot":"0","sType":"1AS","C":[{"N":"str","val":"ppl:","sType":"1AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"15"}]}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"}\n        }\n        "}]},{"N":"choose","sType":"? ","line":"71","C":[{"N":"vc","op":"ne","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","sType":"1AB","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","line":"71","C":[{"N":"fn","name":"position"},{"N":"fn","name":"last"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":","}]},{"N":"true"},{"N":"empty","sType":"0 "}]}]}]},{"N":"templateRule","rank":"3","prec":"0","seq":"4","ns":"xml=~ =http://www.tei-c.org/ns/1.0 html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals","minImp":"0","flags":"s","slots":"200","baseUri":"file:///home/runner/work/alice-thornton/alice-thornton/apps/entities/tei-to-json.xsl","line":"55","module":"tei-to-json.xsl","expand-text":"false","match":"tei:listEvent","prio":"0","matches":"NE nQ{http://www.tei-c.org/ns/1.0}listEvent","C":[{"N":"p.nodeTest","role":"match","test":"NE nQ{http://www.tei-c.org/ns/1.0}listEvent","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}listEvent","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals "},{"N":"sequence","role":"action","sType":"* ","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n        [\n            "}]},{"N":"applyT","sType":"* ","line":"57","mode":"#unnamed","bSlot":"3","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}event","sType":"*NE nQ{http://www.tei-c.org/ns/1.0}event","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"57"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n        ]\n    "}]}]}]},{"N":"templateRule","rank":"4","prec":"0","seq":"3","ns":"xml=~ =http://www.tei-c.org/ns/1.0 html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals","minImp":"0","flags":"s","slots":"200","baseUri":"file:///home/runner/work/alice-thornton/alice-thornton/apps/entities/tei-to-json.xsl","line":"50","module":"tei-to-json.xsl","expand-text":"false","match":"tei:listPlace","prio":"0","matches":"NE nQ{http://www.tei-c.org/ns/1.0}listPlace","C":[{"N":"p.nodeTest","role":"match","test":"NE nQ{http://www.tei-c.org/ns/1.0}listPlace","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}listPlace","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals "},{"N":"sequence","role":"action","sType":"* ","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n        [\n            "}]},{"N":"applyT","sType":"* ","line":"52","mode":"#unnamed","bSlot":"3","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}place","sType":"*NE nQ{http://www.tei-c.org/ns/1.0}place","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"52"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n        ]\n    "}]}]}]},{"N":"templateRule","rank":"5","prec":"0","seq":"2","ns":"xml=~ =http://www.tei-c.org/ns/1.0 html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals","minImp":"0","flags":"s","slots":"200","baseUri":"file:///home/runner/work/alice-thornton/alice-thornton/apps/entities/tei-to-json.xsl","line":"45","module":"tei-to-json.xsl","expand-text":"false","match":"tei:listPerson","prio":"0","matches":"NE nQ{http://www.tei-c.org/ns/1.0}listPerson","C":[{"N":"p.nodeTest","role":"match","test":"NE nQ{http://www.tei-c.org/ns/1.0}listPerson","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}listPerson","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals "},{"N":"sequence","role":"action","sType":"* ","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n        [\n            "}]},{"N":"applyT","sType":"* ","line":"47","mode":"#unnamed","bSlot":"3","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}person","sType":"*NE nQ{http://www.tei-c.org/ns/1.0}person","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","role":"select","line":"47"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"\n        ]\n    "}]}]}]},{"N":"templateRule","rank":"6","prec":"0","seq":"1","ns":"xml=~ =http://www.tei-c.org/ns/1.0 html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals","minImp":"0","flags":"s","slots":"200","baseUri":"file:///home/runner/work/alice-thornton/alice-thornton/apps/entities/tei-to-json.xsl","line":"39","module":"tei-to-json.xsl","expand-text":"false","match":"/","prio":"-0.5","matches":"ND","C":[{"N":"p.nodeTest","role":"match","test":"ND","sType":"1ND","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals "},{"N":"sequence","role":"action","sType":"* ","C":[{"N":"applyT","sType":"* ","line":"40","mode":"#unnamed","bSlot":"3","C":[{"N":"docOrder","sType":"*NE nQ{http://www.tei-c.org/ns/1.0}listPerson","role":"select","line":"40","C":[{"N":"slash","op":"/","sType":"*NE nQ{http://www.tei-c.org/ns/1.0}listPerson","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"root"},{"N":"axis","name":"descendant","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}listPerson"}]}]}]},{"N":"applyT","sType":"* ","line":"41","mode":"#unnamed","bSlot":"3","C":[{"N":"docOrder","sType":"*NE nQ{http://www.tei-c.org/ns/1.0}listPlace","role":"select","line":"41","C":[{"N":"slash","op":"/","sType":"*NE nQ{http://www.tei-c.org/ns/1.0}listPlace","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"root"},{"N":"axis","name":"descendant","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}listPlace"}]}]}]},{"N":"applyT","sType":"* ","line":"42","mode":"#unnamed","bSlot":"3","C":[{"N":"docOrder","sType":"*NE nQ{http://www.tei-c.org/ns/1.0}listEvent","role":"select","line":"42","C":[{"N":"docOrder","sType":"*NE nQ{http://www.tei-c.org/ns/1.0}listEvent","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"slash","op":"/","C":[{"N":"slash","op":"/","C":[{"N":"root"},{"N":"axis","name":"descendant-or-self","nodeTest":"*N"}]},{"N":"filter","C":[{"N":"axis","name":"child","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}listEvent"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"attVal","name":"Q{}type"},{"N":"str","val":"events"}]}]}]}]}]}]}]}]},{"N":"templateRule","rank":"7","prec":"0","seq":"0","ns":"xml=~ =http://www.tei-c.org/ns/1.0 html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals","minImp":"0","flags":"s","slots":"200","baseUri":"file:///home/runner/work/alice-thornton/alice-thornton/apps/entities/tei-to-json.xsl","line":"36","module":"tei-to-json.xsl","expand-text":"false","match":"comment()","prio":"-0.5","matches":"NC","C":[{"N":"p.nodeTest","role":"match","test":"NC","sType":"1NC","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals "},{"N":"empty","sType":"0 ","role":"action"}]}]}]},{"N":"overridden"},{"N":"key","name":"Q{}element_from_ref","binds":"3 0 1 4","flags":"u","module":"tei-to-json.xsl","ns":"xml=~ =http://www.tei-c.org/ns/1.0 html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals","baseUri":"file:///home/runner/work/alice-thornton/alice-thornton/apps/entities/tei-to-json.xsl","line":"14","C":[{"N":"p.withUpper","role":"match","axis":"parent","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}*","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"p.withPredicate","C":[{"N":"p.nodeTest","test":"NE nQ{http://www.tei-c.org/ns/1.0}*"},{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}ref"}]},{"N":"p.withUpper","axis":"ancestor-or-self","C":[{"N":"p.nodeTest","test":"N"},{"N":"p.nodeTest","test":"ND"}]}]},{"N":"data","role":"use","C":[{"N":"data","C":[{"N":"fn","name":"tokenize","sType":"*AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","line":"14","C":[{"N":"fn","name":"normalize-space","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||normalize-space","C":[{"N":"check","card":"?","diag":"0|0||normalize-space","C":[{"N":"attVal","name":"Q{}ref"}]}]}]},{"N":"str","val":" "}]}]}]}]},{"N":"key","name":"Q{}element_from_eventid","binds":"3 0 1 4","flags":"u","module":"tei-to-json.xsl","ns":"xml=~ =http://www.tei-c.org/ns/1.0 html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals","baseUri":"file:///home/runner/work/alice-thornton/alice-thornton/apps/entities/tei-to-json.xsl","line":"16","C":[{"N":"p.withUpper","role":"match","axis":"ancestor","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}milestone","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","C":[{"N":"p.nodeTest","test":"NE nQ{http://www.tei-c.org/ns/1.0}milestone"},{"N":"p.nodeTest","test":"ND"}]},{"N":"data","role":"use","C":[{"N":"data","C":[{"N":"fn","name":"tokenize","sType":"*AS","ns":"= xml=~ fn=~ html=http://www.w3.org/1999/xhtml tei=http://www.tei-c.org/ns/1.0 xsl=~ dts=https://w3id.org/dts/api# xs=~ lookup=lookup internals=internals ","line":"16","C":[{"N":"fn","name":"normalize-space","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||normalize-space","C":[{"N":"check","card":"?","diag":"0|0||normalize-space","C":[{"N":"attVal","name":"Q{}n"}]}]}]},{"N":"str","val":" "}]}]}]}]},{"N":"output","C":[{"N":"property","name":"Q{http://saxon.sf.net/}stylesheet-version","value":"20"}]},{"N":"decimalFormat"}],"Σ":"f9c60353"}